#!/bin/bash

if [[ "$#" < 1 ]]; then
    echo "No argument given. Run './exec help' for options."
fi

for arg in "$@"
do
	if [[ "$arg" == "help" ]]; then
		echo "./exec [ setup | build | run | clean | heroku ]"
	fi

	if [[ "$arg" == "setup" ]] || [[ "$arg" == "install" ]]; then
		npm install
	fi

	if [[ "$arg" == "build" ]]; then
		npm run tsc
		npm run html
	fi

	if [[ "$arg" == "run" ]]; then
		node ./build/app.js
	fi

	if [[ "$arg" == "clean" ]]; then
        rm -r ./build/*
		echo "Deleted all files from ./build"
	fi

	if [[ "$arg" == "heroku" ]]; then
		echo "Deploy locally: heroku local web"
		echo "Deploy to live: git push heroku master"
		echo "Scale the app: heroku ps:scale web=0"
		echo "Visit live: heroku open"
		echo "View inside dyno: heroku run bash"
		echo "See config vars: heroku config"
	fi

done
