<!-- This is kind of our main file for the client -->

<canvas id="ctx" width="500" height="500"></canvas>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script src="./scripts/Inputs.ts"></script>

<script>
	var ctx = document.getElementById("ctx").getContext("2d");
	ctx.font = "30px Arial";
	var socket = io();

	// https://keycode.info/
	document.onkeydown = function(event) {
		if (event.keyCode === 37)  // arrowLeft
			socket.emit('keyPress',{inputId:'moveleft',state:true});
		else if (event.keyCode === 39)  // arrowRight
			socket.emit('keyPress',{inputId:'moveright',state:true});
		else if (event.keyCode === 38)  // arrowUp
			socket.emit('keyPress',{inputId:'rotateright',state:true});
		else if (event.keyCode === 40)  // arrowDown
			socket.emit('keyPress',{inputId:'softdrop',state:true});
		else if (event.keyCode === 32)  // spacebar
			socket.emit('keyPress',{inputId:'harddrop',state:true});
		else if (event.keyCode === 16)  // shift
			socket.emit('keyPress',{inputId:'hold',state:true});
	}

	document.onkeyup = function(event) {
		if (event.keyCode === 37)  // arrowLeft
			socket.emit('keyPress',{inputId:'moveleft',state:false});
		else if (event.keyCode === 39)  // arrowRight
			socket.emit('keyPress',{inputId:'moveright',state:false});
		else if (event.keyCode === 38)  // arrowUp
			socket.emit('keyPress',{inputId:'rotateright',state:false});
		else if (event.keyCode === 40)  // arrowDown
			socket.emit('keyPress',{inputId:'softdrop',state:false});
		else if (event.keyCode === 32)  // spacebar
			socket.emit('keyPress',{inputId:'harddrop',state:false});
		else if (event.keyCode === 16)  // shift
			socket.emit('keyPress',{inputId:'hold',state:false});
	}
</script>
